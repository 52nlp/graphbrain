Object.prototype.size=function(){var a=this.length?--this.length:-1;for(var b in this){a++}return a};var rotateAndTranslate=function(c,h,d,b){var a=c[0];var j=c[1];var f=Math.cos(h)*a-Math.sin(h)*j;var e=Math.sin(h)*a+Math.cos(h)*j;a=f+d;j=e+b;c[0]=a;c[1]=j};var dotProduct=function(b,a){return(b[0]*a[0])+(b[1]*a[1])};var pointInTriangle=function(c,b,a,h){var q=[0,0];var o=[0,0];var m=[0,0];q[0]=a[0]-c[0];q[1]=a[1]-c[1];o[0]=b[0]-c[0];o[1]=b[1]-c[1];m[0]=h[0]-c[0];m[1]=h[1]-c[1];var n=dotProduct(q,q);var k=dotProduct(q,o);var j=dotProduct(q,m);var f=dotProduct(o,o);var d=dotProduct(o,m);var e=1/(n*f-k*k);var r=(f*j-k*d)*e;var p=(n*d-k*j)*e;return(r>0)&&(p>0)&&(r+p<1)};var interRect=function(b,m,a,k,f,s,n,o){var q,j,h,c;var r=a-b;var p=k-m;if((r==0)&&(p==0)){return 0}if(r!=0){var c;if(r>0){c=n}else{c=f}j=(c-b)/r}if(p!=0){var c;if(p>0){c=o}else{c=s}h=(c-m)/p}if(r==0){q=h}else{if(p==0){q=j}else{if(j<h){q=j}else{q=h}}}var e=b+r*q;var d=m+p*q;return[e,d]};var rectsOverlap=function(f,j,e,h,b,d,a,c){if(f<a&&e>b&&j<c&&h>d){return true}return false};var sepAxisSide=function(c,b,a){var d=((b.x-c.x)*(a.y-c.y))-((b.y-c.y)*(a.x-c.x));if(d<0){return -1}else{return 1}};var sepAxis=function(e,c,b,f){var d=sepAxisSide(e,c,b);var a=sepAxisSide(e,c,f.v1);if(d==a){return false}if(a!=sepAxisSide(e,c,f.v2)){return false}if(a!=sepAxisSide(e,c,f.v3)){return false}if(a!=sepAxisSide(e,c,f.v4)){return false}return true};var rotRectsOverlap=function(b,a){if(sepAxis(b.v1,b.v2,b.v3,a)){return false}if(sepAxis(b.v2,b.v3,b.v1,a)){return false}if(sepAxis(b.v3,b.v4,b.v1,a)){return false}if(sepAxis(b.v4,b.v1,b.v2,a)){return false}if(sepAxis(a.v1,a.v2,a.v3,b)){return false}if(sepAxis(a.v2,a.v3,a.v1,b)){return false}if(sepAxis(a.v3,a.v4,a.v1,b)){return false}if(sepAxis(a.v4,a.v1,a.v2,b)){return false}return true};var rectsDist2=function(b,o,a,m,r,f,q,e){if(rectsOverlap(b,o,a,m,r,f,q,e)){return 0}var j=b+((a-b)/2);var h=o+((m-o)/2);var p=r+((q-r)/2);var n=f+((e-f)/2);var t=interRect(j,h,p,n,b,o,a,m);var s=interRect(p,n,j,h,r,f,q,e);var d=t[0]-s[0];var c=t[1]-s[1];var k=(d*d)+(c*c);return k};var rectsDist=function(b,h,a,f,k,d,j,c){var e=rectsDist2(b,h,a,f,k,d,j,c);e=Math.sqrt(e);return e};var lineSegsOverlap=function(e,m,d,k,b,j,n,h){var f=(h-j)*(d-e)-(n-b)*(k-m);var c=(n-b)*(m-j)-(h-j)*(e-b);var a=(d-e)*(m-j)-(k-m)*(e-b);if(f==0){if((c==0)&&(a==0)){return true}else{return false}}c/=f;a/=f;if((c>=0)&&(c<=1)&&(a>=0)&&(a<=1)){return true}else{return false}};var lineRectOverlap=function(b,d,a,c,e){if(lineSegsOverlap(b,d,a,c,e.v1.x,e.v1.y,e.v2.x,e.v2.y)){return true}if(lineSegsOverlap(b,d,a,c,e.v2.x,e.v2.y,e.v3.x,e.v3.y)){return true}if(lineSegsOverlap(b,d,a,c,e.v3.x,e.v3.y,e.v4.x,e.v4.y)){return true}if(lineSegsOverlap(b,d,a,c,e.v4.x,e.v4.y,e.v1.x,e.v1.y)){return true}return false};var makeVisualObj=function(a){a.rect=[];a.rect.v1=[];a.rect.v2=[];a.rect.v3=[];a.rect.v4=[];a.rect.v1.x=0;a.rect.v1.y=0;a.rect.v2.x=0;a.rect.v2.y=0;a.rect.v3.x=0;a.rect.v3.y=0;a.rect.v4.x=0;a.rect.v4.y=0;a.overlaps=function(b){return rotRectsOverlap(a.rect,b.rect)}};var Node=function(d,c,b,a){this.id=d;this.text=c;this.type=b;this.x=0;this.y=0;this.vX=0;this.vY=0;this.subNodes=[];this.snode=a;this.sx=0;this.sy=0};Node.prototype.updatePos=function(){var b=$("#"+this.id);var a=b.offset();this.x=a.left+this.halfWidth;this.y=a.top+this.halfHeight;this.x0=this.x-this.halfWidth;this.y0=this.y-this.halfHeight;this.x1=this.x+this.halfWidth;this.y1=this.y+this.halfHeight;this.sx=this.x-this.snode.x;this.sy=this.y-this.snode.y};Node.prototype.estimatePos=function(){this.x=this.snode.x+this.sx;this.y=this.snode.y+this.sy;this.x0=this.x-this.halfWidth;this.y0=this.y-this.halfHeight;this.x1=this.x+this.halfWidth;this.y1=this.y+this.halfHeight};Node.prototype.place=function(){var d=document.createElement("div");d.setAttribute("class","node_"+this.snode.depth);d.setAttribute("id",this.id);if(this.type=="text"){d.innerHTML='<a href="/node/'+this.id+'" id="'+this.id+'">'+this.text+"</a>"}else{if(this.type=="image"){d.innerHTML='<a href="/node/'+this.id+'" id="'+this.id+'"><img src="'+this.text+'" width="50px" /></a>'}}var b=document.getElementById(this.snode.id);b.appendChild(d);var e=$("#"+this.id);var c=e.outerWidth();var a=e.outerHeight();if(this.type=="image"){c=50;a=80}this.width=c;this.height=a;this.halfWidth=c/2;this.halfHeight=a/2;this.updatePos()};var SNode=function(a){this.id=a;this.x=0;this.y=0;this.vX=0;this.vY=0;this.nodes={};this.subNodes=[];this.parent="unknown";this.links=[];this.weight=0;makeVisualObj(this)};SNode.prototype.updatePos=function(a,e){this.x=a;this.y=e;this.x0=this.x-this.halfWidth;this.y0=this.y-this.halfHeight;this.x1=this.x+this.halfWidth;this.y1=this.y+this.halfHeight;this.rect.v1.x=this.x-this.halfWidth;this.rect.v1.y=this.y-this.halfHeight;this.rect.v2.x=this.x-this.halfWidth;this.rect.v2.y=this.y+this.halfHeight;this.rect.v3.x=this.x+this.halfWidth;this.rect.v3.y=this.y+this.halfHeight;this.rect.v4.x=this.x+this.halfWidth;this.rect.v4.y=this.y-this.halfHeight;for(var c in this.nodes){if(this.nodes.hasOwnProperty(c)){this.nodes[c].estimatePos()}}for(var b=0;b<this.links.length;b++){var d=this.links[b];d.updatePos()}};SNode.prototype.moveTo=function(a,d,c){c=typeof(c)!=="undefined"?c:true;this.updatePos(a,d);$("div#"+this.id).css("left",(this.x-this.halfWidth)+"px");$("div#"+this.id).css("top",(this.y-this.halfHeight)+"px");for(var b in this.nodes){if(this.nodes.hasOwnProperty(b)){this.nodes[b].updatePos()}}if(c){g.drawLinks()}};SNode.prototype.place=function(){var c=document.createElement("div");var f=0;for(var d in this.nodes){if(this.nodes.hasOwnProperty(d)){f++}}if(f>1){c.setAttribute("class","snode_"+this.depth)}else{c.setAttribute("class","snode1_"+this.depth)}c.setAttribute("id",this.id);var b=document.getElementById("nodesDiv");b.appendChild(c);for(var d in this.nodes){if(this.nodes.hasOwnProperty(d)){this.nodes[d].place()}}var e=$("div#"+this.id).outerWidth();var a=$("div#"+this.id).outerHeight();this.width=e;this.height=a;this.halfWidth=e/2;this.halfHeight=a/2;this.moveTo(this.x,this.y);var h=this;$("div#"+this.id).bind("mousedown",function(j){if(uiMode==="drag"){draggedNode=h;return false}else{newLink=new Link(0,h,false,"...");newLink.tx=j.pageX;newLink.ty=j.pageY;return false}});$("div#"+this.id).bind("click",function(j){if(dragging){dragging=false;return false}else{return true}});$("div#"+this.id).hover(function(j){if(newLink){newLink.targ=h}},function(j){})};var Link=function(h,f,d,c,a,b){this.id=h;this.orig=f;this.sorig=d;this.targ=c;this.starg=a;this.label=b;this.ox=0;this.oy=0;this.tx=0;this.ty=0;this.len=0;context.font="10pt Sans-Serif";var e=context.measureText(this.label);this.width=e.width+6;this.height=18;this.halfWidth=this.width/2;this.halfHeight=this.height/2;makeVisualObj(this)};Link.prototype.updatePos=function(){var k=false;var f=false;var d=false;var h=false;if(this.orig){k=this.orig}else{if(this.sorig){k=this.sorig;this.origSuper=true}}if(this.targ){f=this.targ}else{if(this.starg){f=this.starg;this.targSuper=true}}var c=k.x;var m=k.y;var b=f.x;var j=f.y;p0=interRect(c,m,b,j,k.x0,k.y0,k.x1,k.y1);p1=interRect(b,j,c,m,f.x0,f.y0,f.x1,f.y1);this.x0=p0[0];this.y0=p0[1];this.x1=p1[0];this.y1=p1[1];var o=this.x1-this.x0;var n=this.y1-this.y0;this.len=(o*o)+(n*n);this.len=Math.sqrt(this.len);this.cx=this.x0+((this.x1-this.x0)/2);this.cy=this.y0+((this.y1-this.y0)/2);var e=(this.y1-this.y0)/(this.x1-this.x0);this.angle=Math.atan(e);var a=[[0,0],[0,0],[0,0],[0,0],[0,0]];if((this.x0<this.x1)||((this.x0==this.x1)&&(this.y0<this.y1))){a[0][0]=-this.halfWidth;a[0][1]=-this.halfHeight;a[1][0]=-this.halfWidth;a[1][1]=this.halfHeight;a[2][0]=this.halfWidth;a[2][1]=this.halfHeight;a[3][0]=this.halfWidth+6;a[3][1]=0;a[4][0]=this.halfWidth;a[4][1]=-this.halfHeight}else{a[0][0]=-this.halfWidth;a[0][1]=-this.halfHeight;a[1][0]=-this.halfWidth-6;a[1][1]=0;a[2][0]=-this.halfWidth;a[2][1]=this.halfHeight;a[3][0]=this.halfWidth;a[3][1]=this.halfHeight;a[4][0]=this.halfWidth;a[4][1]=-this.halfHeight}for(i=0;i<5;i++){rotateAndTranslate(a[i],this.angle,this.cx,this.cy)}this.points=a;if((this.x0<this.x1)||((this.x0==this.x1)&&(this.y0<this.y1))){this.rect.v1.x=a[0][0];this.rect.v1.y=a[0][1];this.rect.v2.x=a[1][0];this.rect.v2.y=a[1][1];this.rect.v3.x=a[2][0];this.rect.v3.y=a[2][1];this.rect.v4.x=a[4][0];this.rect.v4.y=a[4][1]}else{this.rect.v1.x=a[0][0];this.rect.v1.y=a[0][1];this.rect.v2.x=a[2][0];this.rect.v2.y=a[2][1];this.rect.v3.x=a[3][0];this.rect.v3.y=a[3][1];this.rect.v4.x=a[4][0];this.rect.v4.y=a[4][1]}};Link.prototype.draw=function(){this.updatePos();var c="#FFD326";var b="#000";if(~this.label.indexOf("direct")){c="#BEE512"}else{if(~this.label.indexOf("char")){c="#DFFD59"}else{if(~this.label.indexOf("play")){c="#FFFC26"}else{if(~this.label.indexOf("is")){c="#ED9107";b="#FFF"}}}}context.strokeStyle=c;context.fillStyle=c;context.lineWidth=0.7;context.beginPath();context.moveTo(this.x0,this.y0);context.lineTo(this.x1,this.y1);context.stroke();if(this.origSuper){context.fillStyle="#505050"}else{context.fillStyle=c}context.beginPath();var a=4;context.arc(this.x0,this.y0,a,0,2*Math.PI,false);context.fill();if(this.targSuper){context.fillStyle="#505050"}else{context.fillStyle=c}context.beginPath();context.arc(this.x1,this.y1,a,0,2*Math.PI,false);context.fill();context.fillStyle=c;context.beginPath();context.moveTo(this.points[0][0],this.points[0][1]);for(i=1;i<5;i++){context.lineTo(this.points[i][0],this.points[i][1])}context.closePath();context.fill();context.save();context.translate(this.cx,this.cy);context.rotate(this.angle);context.font="10pt Sans-Serif";context.fillStyle=b;context.textAlign="center";context.textBaseline="middle";context.fillText(this.label,0,0);context.restore()};Link.prototype.pointInLabel=function(a){return(pointInTriangle(this.points[0],this.points[1],this.points[2],a)||pointInTriangle(this.points[2],this.points[3],this.points[4],a)||pointInTriangle(this.points[0],this.points[2],this.points[4],a))};Link.prototype.intersectsLink=function(a){return lineSegsOverlap(this.x0,this.y0,this.x1,this.y1,a.x0,a.y0,a.x1,a.y1)};Link.prototype.intersectsSNode=function(a){return lineRectOverlap(this.x0,this.y0,this.x1,this.y1,a.rect)};var GraphPos=function(d,e,b){this.angDivs=12;this.radDivs=10;this.ang2=Math.PI*0.5;this.snode=d;this.halfWidth=e/2;this.halfHeight=b/2;this.done=false;this.angStep=0;this.radStep=1;this.x=this.halfWidth;this.y=this.halfHeight;if(this.snode.depth>1){var c=this.snode.parent.x-this.halfWidth;var a=this.snode.parent.y-this.halfHeight;this.baseAngle=Math.atan2(a,c);this.minRadius=Math.sqrt((c*c)+(a*a));this.maxRadius=Math.sqrt((this.halfWidth*this.halfWidth)+(this.halfHeight*this.halfHeight))}this.next()};GraphPos.prototype.next=function(){if(this.snode.depth==1){this.next1()}else{this.next2()}};GraphPos.prototype.next1=function(){if(this.angStep>=this.angDivs){this.radStep++;this.angStep=0}if(this.radStep>this.radDivs){this.done=true;return}var e=Math.PI*2*(this.angStep/this.angDivs);var d=this.halfWidth*(this.radStep/this.radDivs);var c=this.halfHeight*(this.radStep/this.radDivs);this.x=this.halfWidth+(d*Math.cos(e));this.y=this.halfHeight+(c*Math.sin(e));this.angStep++};GraphPos.prototype.next2=function(){if(this.angStep>=this.angDivs){this.radStep++;this.angStep=0}if(this.radStep>=this.radDivs){this.done=true;return}var b=(this.ang2*(this.angStep/this.angDivs))-(this.ang2/2);b+=this.baseAngle;var a=this.radStep/this.radDivs;a*=this.maxRadius-this.minRadius;a+=this.minRadius;this.x=this.halfWidth+(a*Math.cos(b));this.y=this.halfHeight+(a*Math.sin(b));this.angStep++};var Graph=function(){this.snodes={};this.nodes={};this.links=[];this.newNode=false;this.newNodeActive=false};Graph.prototype.drawLinks=function(){context.clearRect(0,0,context.canvas.width,context.canvas.height);var a;for(a=0;a<this.links.length;a++){this.links[a].draw()}if(newLink){newLink.draw()}};Graph.prototype.placeNodes=function(){for(var a in this.snodes){if(this.snodes.hasOwnProperty(a)){this.snodes[a].place()}}};Graph.prototype.labelAtPoint=function(a,d){var c=[a,d];for(var b=this.links.length-1;b>=0;b--){if(this.links[b].pointInLabel(c)){return this.links[b]}}return -1};Graph.prototype.genSNodeKeys=function(){this.snodeKeys=[];for(var a in this.snodes){this.snodeKeys.push(a)}};Graph.prototype.layoutSNode=function(o,c,q,n){var e=100;o.fixed=true;var p=99999999;var v,t;var r=new GraphPos(o,q,n);while(!r.done){var a=0;var m=r.x;var h=r.y;o.updatePos(m,h);for(var w=0;w<c.length;w++){var b=c[w];if(o.overlaps(b)){a+=1000000}for(var u=0;u<o.links.length;u++){var f=o.links[u];if(f.overlaps(b)){a+=10000}}}for(var u=0;u<this.links.length;u++){var f=this.links[u];if(f.sorig.fixed&&f.starg.fixed){if(o.overlaps(f)){a+=10000}}}for(var u=0;u<this.links.length;u++){var f=this.links[u];if(f.sorig.fixed&&f.starg.fixed){for(var s=0;s<o.links.length;s++){var d=o.links[s];if(d.sorig.fixed&&d.starg.fixed){if(f.intersectsLink(d)){a+=10000}}}}}for(var u=0;u<o.links.length;u++){var f=o.links[u];if(f.sorig.fixed&&f.starg.fixed){a+=f.len}}if(a<p){p=a;v=m;t=h}r.next()}o.moveTo(v,t)};Graph.prototype.nextByWeight=function(e){var d=-1;var a=false;for(var c in this.snodes){if(this.snodes.hasOwnProperty(c)){var b=this.snodes[c];if((!b.fixed)&&(b.depth==e)){if(b.weight>d){d=b.weight;a=b}}}}return a};Graph.prototype.layout=function(e,b){for(var d in this.snodes){if(this.snodes.hasOwnProperty(d)){var c=this.snodes[d];c.fixed=false}}var h=[g.root];g.root.moveTo(e/2,b/2);g.root.fixed=true;var f=this.snodes.size();if(f>1){var c=this.nextByWeight(1);var a=e/2;a-=g.root.width/2;a-=c.width/2;a-=100;var j=b/2;c.moveTo(a,j);c.fixed=true;h.push(c)}if(f>2){var c=this.nextByWeight(1);if(c){var a=e/2;a+=g.root.width/2;a+=c.width/2;a+=100;var j=b/2;c.moveTo(a,j);c.fixed=true;h.push(c)}}if(f>3){var c=this.nextByWeight(1);if(c){var a=e/2;var j=b/2;j-=g.root.height/2;j-=c.height/2;j-=100;c.moveTo(a,j);c.fixed=true;h.push(c)}}if(f>4){var c=this.nextByWeight(1);if(c){var a=e/2;var j=b/2;j+=g.root.height/2;j+=c.height/2;j+=100;c.moveTo(a,j);c.fixed=true;h.push(c)}}for(var d in this.snodes){if(this.snodes.hasOwnProperty(d)){var c=this.snodes[d];if((c.depth==1)&&(!c.fixed)){this.layoutSNode(c,h,e,b);h.push(c)}}}for(var d in this.snodes){if(this.snodes.hasOwnProperty(d)){var c=this.snodes[d];if(c.depth==2){this.layoutSNode(c,h,e,b);h.push(c)}}}};var dragMode=function(a){uiMode="drag";$("#dragModeButton").addClass("selModeButton");$("#addModeButton").removeClass("selModeButton")};var addMode=function(a){uiMode="add";$("#dragModeButton").removeClass("selModeButton");$("#addModeButton").addClass("selModeButton");$("#tip").html("Try clicking & dragging!");$("#tip").fadeIn("slow",function(){tipVisible=true})};var g;var context;var uiMode;var draggedNode;var dragging;var newLink;var tipVisible;var initInterface=function(){if(error!=""){$("#tip").html('<div class="error">'+error+"</div>");$("#tip").fadeIn("slow",function(){tipVisible=true})}newLink=false;draggedNode=false;dragging=false;curTargNode=false;tipVisible=false;$("#nodesDiv").bind("mousemove",(function(a){if(uiMode==="drag"){if(draggedNode){draggedNode.moveTo(a.pageX,a.pageY);dragging=true}}else{if(newLink){newLink.tx=a.pageX;newLink.ty=a.pageY;g.drawLinks();return false}}}));$("#nodesDiv").bind("mouseup",(function(a){if(uiMode==="drag"){draggedNode=false}else{if((newLink.orig)||(newLink.targ)){if(tipVisible){$(".tip").fadeOut("slow",function(){tipVisible=false})}$("#overlay").fadeIn(80,(function(b){$("#box").css({visibility:"visible"});if(newLink.orig){$("#dNode1").html(newLink.orig.text);$("#dNode1_id").val(newLink.orig.id);$("#dNode1").css({display:"block"});$("#dNode1In").css({display:"none"})}else{$("#dNode1").css({display:"none"});$("#dNode1In").css({display:"block"});$("#dNode1_id").val("none")}if(newLink.targ){$("#dNode2").html(newLink.targ.text);$("#dNode2_id").val(newLink.targ.id);$("#dNode2").css({display:"block"});$("#dNode2In").css({display:"none"})}else{$("#dNode2").css({display:"none"});$("#dNode2In").css({display:"block"});$("#dNode2_id").val("none")}newLink.targ=false}))}else{newLink=false;g.drawLinks()}}}));$("#boxclose").click(function(){$("#overlay").fadeOut(80,(function(a){$("#box").css({visibility:"hidden"});newLink=false;g.drawLinks()}))});dragMode();$("#dragModeButton").bind("click",dragMode);$("#addModeButton").bind("click",addMode);$("#nodesDiv").bind("mousedown",function(a){if(uiMode==="drag"){return false}else{newLink=new Link(0,false,false,"...");newLink.ox=a.pageX;newLink.oy=a.pageY;newLink.tx=a.pageX;newLink.ty=a.pageY;return false}});$("#nodesDiv").bind("click",(function(a){l=g.labelAtPoint(a.pageX,a.pageY);if(l!=-1){if(confirm('Do you want to delete connection:\n"'+l.orig.text+" "+l.type+" "+l.targ.text+'"?')){document.forms.delinkForm.elements.link_orig.value=l.orig.id;document.forms.delinkForm.elements.link_targ.value=l.targ.id;document.forms.delinkForm.elements.link_type.value=l.type;$("#delinkForm").submit()}}}))};var initGraph=function(){var z=document.getElementById("graphCanvas");context=z.getContext("2d");g=new Graph();context.translate(0.5,0.5);var x,w;for(x=0;x<snodes.length;x++){var y=snodes[x];var d=y.id;var v=y.nodes;var s=new SNode(d);for(w=0;w<v.length;w++){var m=v[w];var o=nodes[m];var p=o.text;var c=o.type;var k=o.parent;var t=new Node(m,p,c,s);s.nodes[m]=t;g.nodes[m]=t;if((s.parent=="unknown")||(k=="")){s.parent=k}}g.snodes[d]=s}for(x=0;x<snodes.length;x++){var d=snodes[x]["id"];var s=g.snodes[d];var k=s.parent;if(k==""){g.root=s;s.parent=false}else{s.parent=g.nodes[k].snode;g.nodes[k].snode.subNodes[g.nodes[k].snode.subNodes.length]=s}}for(var A in g.snodes){if(g.snodes.hasOwnProperty(A)){var s=g.snodes[A];s.weight=s.nodes.size();if(s.parent==""){s.depth=0}else{if(s.parent==g.root){s.depth=1;for(var x=0;x<s.subNodes.length;x++){var e=s.subNodes[x];s.weight+=e.nodes.size()}}else{s.depth=2}}}}g.genSNodeKeys();for(x=0;x<links.length;x++){var u=links[x];var b="";var q="";var a="";var n="";if("orig" in u){b=g.nodes[u.orig];a=b.snode}else{b=false;a=g.snodes[u.sorig]}if("targ" in u){q=g.nodes[u.targ];n=q.snode}else{q=false;n=g.snodes[u.starg]}var f=new Link(u.id,b,a,q,n,u.relation);g.links.push(f);a.links.push(f);n.links.push(f)}var h=window.innerWidth/2;var r=window.innerHeight/2;g.placeNodes();g.layout(window.innerWidth,window.innerHeight);context.canvas.width=window.innerWidth;context.canvas.height=window.innerHeight;g.drawLinks()};$(function(){initInterface();initGraph()});